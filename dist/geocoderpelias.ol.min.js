!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t){e.exports='<div id="m-geocoderpelias-container" class="m-control m-container m-geocoderpelias">\n  <div id="m-geocoderpelias-search">\n    <input type="text" id="m-geocoderpelias-search-input" placeholder="Buscar"\n      class="m-input-search m-plugin-autocomplete m-geocoderpelias-input-text">\n    <button type="button" id="m-geocoderpelias-clear-btn" class="g-cartografia-cancelar m-clear-btn"\n      title="Limpiar búsqueda"></button>\n    <button type="button" id="m-geocoderpelias-search-btn" class="g-cartografia-zoom m-search-btn"\n      title="Buscar"></button>\n  </div>\n  <div id="m-geocoderpelias-response" class="m-geocoderpelias-result-panel">\n  </div>\n</div>'},function(e){e.exports=JSON.parse('{"url":{"name":"Geocoderpelias","separator":"*"},"constructor":"M.plugin.Geocoderpelias","parameters":[],"files":{"ol":{"scripts":[],"styles":[]}},"metadata":{"uuid_plugin":"","uuid_version_plugin":"","version_ficha_metadatos":"","name":"Geocoderpelias","description":"Description of the plugin","text":"A full text about plugin","version":"1.0.0","date":"","author":"","org":"","tags":"mapea,plugin","icon":"./facade/assets/icons/icons.svg","buttons":[{"title":"","description":"","querySelector":""},{"title":"","description":"","querySelector":""}],"dependencies":{"modules":["",""],"plugins":[{"uuid":"","name":""}],"services":[{"name":"","description":""}]},"compatibility":["6.0.0"]}}')},function(e,t,r){},function(e,t,r){"use strict";r.r(t);r(2);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=s(e);if(t){var n=s(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(p,M.impl.Control);var t,r,o,l=a(p);function p(){return n(this,p),l.apply(this,arguments)}return t=p,(r=[{key:"addTo",value:function(e,t){u(s(p.prototype),"addTo",this).call(this,e,t)}},{key:"activateClick",value:function(e){}},{key:"deactivateClick",value:function(e){}}])&&i(t.prototype,r),o&&i(t,o),p}(),f=r(0),y=r.n(f);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t,r){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=w(e);if(t){var n=w(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return g(this,r)}}function g(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(i,M.Control);var t,r,o,n=v(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),M.utils.isUndefined(p)&&M.exception("La implementación usada no puede crear controles GeocoderpeliasControl");var r=new p;return(t=n.call(this,r,"Geocoderpelias")).config=e,t.url=t.config.url,t.autocompleteEndPoint="autocomplete?",t.pointStyle=new M.style.Point({radius:5,fill:{color:"#458736",opacity:1},stroke:{color:"#FFFFFF",width:2}}),t.geoJSON=null,t.arrayFeatures=null,t.selectedFeatures=null,t.layer=null,t.timer=null,t}return t=i,(r=[{key:"createView",value:function(e){var t=this,r={vars:{}};return new Promise((function(e,o){var n=M.template.compileSync(y.a,r);t.element=n,t.addEvents(n),e(n)}))}},{key:"activate",value:function(){m(w(i.prototype),"activate",this).call(this),this.getImpl().activateClick(this.map_)}},{key:"deactivate",value:function(){m(w(i.prototype),"deactivate",this).call(this),this.getImpl().deactivateClick(this.map_)}},{key:"getActivationButton",value:function(e){return e.querySelector(".m-geocoderpelias button")}},{key:"equals",value:function(e){return e instanceof i}},{key:"addEvents",value:function(e){var t=this;this.clearButon=e.querySelectorAll("button.m-clear-btn")[0],this.searchButon=e.querySelectorAll("button.m-search-btn")[0],this.inputTextSearch=e.querySelectorAll("input[type=text].m-geocoderpelias-input-text")[0],this.resultPanel=e.querySelectorAll("div.m-geocoderpelias-result-panel")[0],this.inputTextSearch.addEventListener("keypress",(function(){t.delayQuery(t.autoCompleteAction(t.inputTextSearch.value),5e3)})),this.clearButon.addEventListener("click",(function(){t.inputTextSearch.value=null,t.resultPanel.style.display="none",t.geoJSON&&t.map_.removeLayers(t.geoJSON)})),this.searchButon.addEventListener("click",(function(){console.log("buscar")})),this.resultPanel.addEventListener("click",(function(e){var r=e.target.dataset.feature;t.selectRecord(r)}))}},{key:"autoCompleteAction",value:function(e){var t=this,r=this.url+this.autocompleteEndPoint,o="text="+e+"&layers=address,street,venue&sources=ieca";M.remote.get(encodeURI(r+o)).then((function(e){var r=JSON.parse(e.text);r&&t.parseAutoCompleteResponse(r)}))}},{key:"showSearchResult",value:function(){"block"!=this.resultPanel.style.display&&(this.resultPanel.style.display="block")}},{key:"parseAutoCompleteResponse",value:function(e){this.arrayFeatures=new Array;var t='<div class="results" id="m-autcomplete">';if("FeatureCollection"==e.type)for(var r=e.features,o=0;o<r.length;o++){var n=r[o];this.arrayFeatures.push(this.createFeature(n)),t+='<div class="result autocomplete" data-feature="'+n.properties.id+'"><i class="result-icon g-cartografia-pin5"></i>'+n.properties.label+"</div>"}this.resultPanel.innerHTML=t,this.resultPanel.innerHTML+="</div>",this.showSearchResult()}},{key:"createFeature",value:function(e){var t=new M.Feature;return t.setId(e.properties.id),t.setAttribute("accuracy",e.properties.accuracy),t.setAttribute("country",e.properties.country),t.setAttribute("country_a",e.properties.country_a),t.setAttribute("gid",e.properties.gid),t.setAttribute("housenumber",e.properties.housenumber),t.setAttribute("label",e.properties.label),t.setAttribute("layer",e.properties.layer),t.setAttribute("localadmin",e.properties.localadmin),t.setAttribute("locality",e.properties.locality),t.setAttribute("macroregion",e.properties.macroregion),t.setAttribute("name",e.properties.name),t.setAttribute("region",e.properties.region),t.setAttribute("source",e.properties.source),t.setAttribute("source_id",e.properties.source_id),t.setAttribute("street",e.properties.street),t.setGeometry(e.geometry),t.setStyle(this.pointStyle),t}},{key:"selectRecord",value:function(e){var t=!1,r=null;this.selectedFeatures=new Array;do{for(var o=0;o<this.arrayFeatures.length;o++){var n=this.arrayFeatures[o];n.getId()==e&&(t=!0,this.selectedFeatures.push(n),r=this.buildGeoJSON(this.selectedFeatures))}}while(!t);return r}},{key:"buildGeoJSON",value:function(e){var t=this,r=e[0].getGeoJSON();this.map_.removeLayers(this.geoJSON),this.geoJSON&&this.map_.removeLayers(this.geoJSON),this.geoJSON=new M.layer.GeoJSON({name:"result",source:{crs:{properties:{name:"EPSG:4326"},type:"name"},features:[r],type:"FeatureCollection"}}),this.geoJSON.setStyle(this.pointStyle),this.map_.addLayers(this.geoJSON),this.geoJSON.on(M.evt.LOAD,(function(){t.map_.setBbox(t.geoJSON.getFeaturesExtent()),t.map_.setZoom(9)}))}},{key:"delayQuery",value:function(){var e=0;return function(t,r){clearTimeout(e),e=setTimeout(t,r)}}}])&&h(t.prototype,r),o&&h(t,o),i}(),S=r(1);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=x(e);if(t){var n=x(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(i,M.Plugin);var t,r,o,n=k(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this)).map_=null,t.controls_=[],t.config=e,t.metadata_=S.metadata,t}return t=i,(r=[{key:"addTo",value:function(e){this.control_=new O(this.config),this.controls_.push(this.control_),this.map_=e,this.panel_=new M.ui.Panel("panelGeocoderpelias",{collapsible:!0,className:"m-geocoderpelias",position:M.ui.position.TR,collapsedButtonClass:"g-cartografia-prismaticos"}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_)}},{key:"getMetadata",value:function(){return this.metadata_}}])&&P(t.prototype,r),o&&P(t,o),i}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.Geocoderpelias=A,window.M.control.GeocoderpeliasControl=O,window.M.impl.control.GeocoderpeliasControl=p}]);
//# sourceMappingURL=geocoderpelias.ol.min.js.map